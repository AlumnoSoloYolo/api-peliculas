<div class="register-container">
    <div *ngIf="showMensajeExitoso" [class]="registerForm.get('username')?.hasError('userExists') 
    ? 'alert alert-danger' 
    : 'alert alert-success'">
        {{ mensajeExitoso }}
    </div>
    <form [formGroup]="registerForm" (ngSubmit)="onRegister($event)">
        <div class="form-group">
            <label for="username">Usuario</label>
            <input id="username" type="text" formControlName="username"
                [class.is-invalid]="formulario.username.errors && formulario.username.touched">
            <div class="error-message" *ngIf="formulario.username.touched">
                {{ getErrorMessage('username') }}
            </div>
        </div>


        <div class="form-group">
            <label for="email">Email</label>
            <input id="email" type="email" formControlName="email"
                [class.is-invalid]="formulario.email.errors && formulario.email.touched">
            <div class="error-message" *ngIf="formulario.email.touched">
                {{ getErrorMessage('email') }}
            </div>
        </div>

        <div class="form-group">
            <label for="password">Contraseña</label>
            <input id="password" type="password" formControlName="password"
                [class.is-invalid]="formulario.password.errors && formulario.password.touched">
            <div class="error-message" *ngIf="formulario.password.touched">
                {{ getErrorMessage('password') }}
            </div>
        </div>

        <div class="form-group">
            <label for="confirmPassword">Confirmar Contraseña</label>
            <input id="confirmPassword" type="password" formControlName="confirmPassword"
                [class.is-invalid]="formulario.confirmPassword.errors && formulario.confirmPassword.touched">
            <div class="error-message" *ngIf="formulario.confirmPassword.touched">
                {{ getErrorMessage('confirmPassword') }}
            </div>
        </div>


        <div class="form-group avatar-selection">
            <label>Elige tu Avatar</label>
            <div class="avatar-grid">
                <div *ngFor="let avatar of avatars" class="avatar-item"
                    [class.selected]="registerForm.get('avatar')?.value === avatar" (click)="selectAvatar(avatar)">
                    <img [src]="getAvatarPath(avatar)" [alt]="avatar" class="avatar-image">
                </div>
            </div>
        </div>


        <div class="enviar">
            <button type="submit" [disabled]="registerForm.invalid">
                Registrarse
            </button>


            <p class="register-link">¿No tienes cuenta? <a routerLink="/login">Entra</a></p>
        </div>

    </form>
</div>